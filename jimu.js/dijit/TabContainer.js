// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/keys dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin ./ViewStack ../utils".split(" "),function(k,e,g,c,f,d,l,m,n,p,h){return k([m,n,l],{baseClass:"jimu-tab",declaredClass:"jimu.dijit.TabContainer",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"control" data-dojo-attach-point\x3d"controlNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',
postCreate:function(){this.inherited(arguments);if(0!==this.tabs.length){this.controlNodes=[];this.viewStack=new p(null,this.containerNode);this.own(f(this.containerNode,"keydown",e.hitch(this,function(a){a.keyCode===d.ESCAPE&&(a.stopPropagation(),this._currentCtrlNode.focus())})));var b=1/this.tabs.length*100;this.isNested&&c.addClass(this.domNode,"nested");g.forEach(this.tabs,function(a){this._createTab(a,b)},this);this.own(f(this.controlNode,"keydown",e.hitch(this,function(a){var b=a.target,c;
a.keyCode===d.RIGHT_ARROW?c=b.nextElementSibling?b.nextElementSibling:this.controlNodes[0]:a.keyCode===d.LEFT_ARROW?c=b.previousElementSibling?b.previousElementSibling:this.controlNodes[this.controlNodes.length-1]:a.keyCode===d.HOME?c=this.controlNodes[0]:a.keyCode===d.END&&(c=this.controlNodes[this.controlNodes.length-1]);c&&(b=c,c.focus())})))}},startup:function(){this.selected?this.selectTab(this.selected):0<this.tabs.length&&this.selectTab(this.tabs[0].title);h.setVerticalCenter(this.domNode)},
_createTab:function(b,a){a=c.create("div",{innerHTML:h.sanitizeHTML(b.title),"class":"tab jimu-vcenter-text",style:{width:this.isNested?"auto":a+"%"},label:b.title},this.controlNode);this.viewStack.viewType=b.content.domNode?"dijit":"dom";b.content.label=b.title;this.viewStack.addView(b.content);this.own(f(a,"click",e.hitch(this,function(a){this.onSelect(b.title,a)})));this.own(f(a,"keydown",e.hitch(this,function(a){if(a.keyCode===d.ENTER||a.keyCode===d.SPACE)this.onSelect(b.title,a)})));a.label=
b.title;this.controlNodes.push(a)},onSelect:function(b,a){c.hasClass(a.target,"jimu-state-selected")||this.selectTab(b,a)},selectTab:function(b){this._selectControl(b);this.viewStack.switchView(b);this.emit("tabChanged",b)},_selectControl:function(b){g.forEach(this.controlNodes,function(a){c.removeClass(a,"jimu-state-selected");c.setAttr(a,"tabindex","-1");a.label===b&&(this._currentCtrlNode=a,c.addClass(a,"jimu-state-selected"),c.setAttr(a,"tabindex","0"))},this)}})});