//>>built
!function(N,O){"object"==typeof exports&&"undefined"!=typeof module?module.exports=O():"function"==typeof define&&define.amd?define(O):(N=N||self).Cropper=O()}(this,function(){function N(a){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function O(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ka(a){if(!(a=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}(a)||function(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}(a)))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function n(a){return"number"==typeof a&&!ya(a)}function L(a){return"object"===N(a)&&null!==a}function H(a){if(!L(a))return!1;
try{var c=a.constructor,b=c.prototype;return c&&b&&za.call(b,"isPrototypeOf")}catch(d){return!1}}function x(a){return"function"==typeof a}function la(a){return Array.from?Array.from(a):Aa.call(a)}function v(a,c){return a&&x(c)&&(Array.isArray(a)||n(a.length)?la(a).forEach(function(b,d){c.call(a,b,d,a)}):L(a)&&Object.keys(a).forEach(function(b){c.call(a,a[b],b,a)})),a}function ca(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1E11;return Ba.test(a)?Math.round(a*c)/c:a}function I(a,
c){var b=a.style;v(c,function(a,c){Ca.test(c)&&n(a)&&(a="".concat(a,"px"));b[c]=a})}function t(a,c){if(c)if(n(a.length))v(a,function(a){t(a,c)});else if(a.classList)a.classList.add(c);else{var b=a.className.trim();b?0>b.indexOf(c)&&(a.className="".concat(b," ").concat(c)):a.className=c}}function E(a,c){c&&(n(a.length)?v(a,function(a){E(a,c)}):a.classList?a.classList.remove(c):0<=a.className.indexOf(c)&&(a.className=a.className.replace(c,"")))}function P(a,c,b){c&&(n(a.length)?v(a,function(a){P(a,
c,b)}):b?t(a,c):E(a,c))}function fa(a){return a.replace(Da,"$1-$2").toLowerCase()}function ga(a,c){return L(a[c])?a[c]:a.dataset?a.dataset[c]:a.getAttribute("data-".concat(fa(c)))}function R(a,c,b){L(b)?a[c]=b:a.dataset?a.dataset[c]=b:a.setAttribute("data-".concat(fa(c)),b)}function D(a,c,b){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},f=b;c.trim().split(ma).forEach(function(c){if(!na){var g=a.listeners;g&&g[c]&&g[c][b]&&(f=g[c][b],delete g[c][b],0===Object.keys(g[c]).length&&delete g[c],
0===Object.keys(g).length&&delete a.listeners)}a.removeEventListener(c,f,d)})}function y(a,c,b){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},f=b;c.trim().split(ma).forEach(function(c){if(d.once&&!na){var g=a.listeners,e=void 0===g?{}:g;f=function(){delete e[c][b];a.removeEventListener(c,f,d);for(var g=arguments.length,h=Array(g),l=0;l<g;l++)h[l]=arguments[l];b.apply(a,h)};e[c]||(e[c]={});e[c][b]&&a.removeEventListener(c,e[c][b],d);e[c][b]=f;a.listeners=e}a.addEventListener(c,f,
d)})}function Q(a,c,b){var d;return x(Event)&&x(CustomEvent)?d=new CustomEvent(c,{detail:b,bubbles:!0,cancelable:!0}):(d=document.createEvent("CustomEvent")).initCustomEvent(c,!0,!0,b),a.dispatchEvent(d)}function oa(a){a=a.getBoundingClientRect();return{left:a.left+(window.pageXOffset-document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}function pa(a){a=a.match(Ea);return null!==a&&(a[1]!==ha.protocol||a[2]!==ha.hostname||a[3]!==ha.port)}function qa(a){var c=
"timestamp\x3d".concat((new Date).getTime());return a+(-1===a.indexOf("?")?"?":"\x26")+c}function S(a){var c=a.rotate,b=a.scaleX,d=a.scaleY,f=a.translateX;a=a.translateY;var g=[];n(f)&&0!==f&&g.push("translateX(".concat(f,"px)"));n(a)&&0!==a&&g.push("translateY(".concat(a,"px)"));n(c)&&0!==c&&g.push("rotate(".concat(c,"deg)"));n(b)&&1!==b&&g.push("scaleX(".concat(b,")"));n(d)&&1!==d&&g.push("scaleY(".concat(d,")"));c=g.length?g.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}
function X(a,c){var b=a.pageX;a=a.pageY;var d={endX:b,endY:a};return c?d:u({startX:b,startY:a},d)}function Y(a){var c=a.aspectRatio,b=a.height,d=a.width,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"contain",g=0<d&&d<1/0,h=0<b&&b<1/0;g&&h?(g=b*c,"contain"===f&&d<g||"cover"===f&&g<d?b=d/c:d=b*c):g?b=d/c:h&&(d=b*c);return{width:d,height:b}}function Fa(a){var c;a=new DataView(a);try{var b,d,f;if(255===a.getUint8(0)&&216===a.getUint8(1))for(var g=a.byteLength,h=2;h+1<g;){if(255===a.getUint8(h)&&
225===a.getUint8(h+1)){d=h;break}h+=1}if(d){var g=d+10,e=d+4;d=4;h="";for(d+=e;e<d;e+=1)h+=ra(a.getUint8(e));if("Exif"===h){var m=a.getUint16(g);if(((b=18761===m)||19789===m)&&42===a.getUint16(g+2,b)){var k=a.getUint32(g+4,b);8<=k&&(f=g+k)}}}if(f){var l,q,n=a.getUint16(f,b);for(q=0;q<n;q+=1)if(l=f+12*q+2,274===a.getUint16(l,b)){l+=8;c=a.getUint16(l,b);a.setUint16(l,1,b);break}}}catch(C){c=1}return c}var aa="undefined"!=typeof window,F=aa?window:{},M=!!aa&&"ontouchstart"in F.document.documentElement,
ia=!!aa&&"PointerEvent"in F,T="".concat("cropper","-crop"),sa="".concat("cropper","-disabled"),A="".concat("cropper","-hidden"),ta="".concat("cropper","-hide"),Ga="".concat("cropper","-invisible"),U="".concat("cropper","-modal"),ja="".concat("cropper","-move"),V="".concat("cropper","Action"),G="".concat("cropper","Preview"),ua=ia?"pointerdown":M?"touchstart":"mousedown",va=ia?"pointermove":M?"touchmove":"mousemove",wa=ia?"pointerup pointercancel":M?"touchend touchcancel":"mouseup",Ha=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,
Ia=/^data:image\/jpeg;base64,/,Ja=/^img|canvas$/i,xa={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,
minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ya=Number.isNaN||F.isNaN,za=Object.prototype.hasOwnProperty,Aa=Array.prototype.slice,u=Object.assign||function(a){for(var c=arguments.length,b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];return L(a)&&0<b.length&&b.forEach(function(b){L(b)&&Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},Ba=/\.\d*(?:0|9){12}\d*$/,Ca=/^width|height|left|top|marginLeft|marginTop$/,
Da=/([a-z\d])([A-Z])/g,ma=/\s\s*/,na=function(){var a=!1;if(aa){var c=!1,b=function(){},d=Object.defineProperty({},"once",{get:function(){return a=!0,c},set:function(a){c=a}});F.addEventListener("test",b,d);F.removeEventListener("test",b,d)}return a}(),ha=F.location,Ea=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i,ra=String.fromCharCode,Ka=/^data:.*,/,La=F.Cropper,M=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
if(!b||!Ja.test(b.tagName))throw Error("The first argument is required and must be an \x3cimg\x3e or \x3ccanvas\x3e element.");this.element=b;this.options=u({},xa,H(c)&&c);this.disabled=this.cropped=!1;this.pointers={};this.sizing=this.sized=this.replaced=this.reloading=this.ready=!1;this.init()}var c,b;return b=[{key:"noConflict",value:function(){return window.Cropper=La,a}},{key:"setDefaults",value:function(a){u(xa,H(a)&&a)}}],c=[{key:"init",value:function(){var a,b=this.element,c=b.tagName.toLowerCase();
if(!b.cropper){if(b.cropper=this,"img"===c){if(this.isImg=!0,a=b.getAttribute("src")||"",!(this.originalUrl=a))return;a=b.src}else"canvas"===c&&window.HTMLCanvasElement&&(a=b.toDataURL());this.load(a)}}},{key:"load",value:function(a){var b=this;if(a){this.url=a;this.imageData={};var c=this.element,d=this.options;if(d.rotatable||d.scalable||(d.checkOrientation=!1),d.checkOrientation&&window.ArrayBuffer)if(Ia.test(a))this.read((e=a.replace(Ka,""),m=atob(e),k=new ArrayBuffer(m.length),v(l=new Uint8Array(k),
function(a,b){l[b]=m.charCodeAt(b)}),k));else{var e,m,k,l,q=new XMLHttpRequest;e=this.clone.bind(this);this.reloading=!0;(this.xhr=q).onabort=e;q.onerror=e;q.ontimeout=e;q.onprogress=function(){"image/jpeg"!==q.getResponseHeader("content-type")&&q.abort()};q.onload=function(){b.read(q.response)};q.onloadend=function(){b.reloading=!1;b.xhr=null};d.checkCrossOrigin&&pa(a)&&c.crossOrigin&&(a=qa(a));q.open("GET",a);q.responseType="arraybuffer";q.withCredentials="use-credentials"===c.crossOrigin;q.send()}else this.clone()}}},
{key:"read",value:function(a){var b=this.options,c=this.imageData,d=Fa(a),e=0,m=1,k=1;1<d&&(this.url=function(a,b){var c=[];for(a=new Uint8Array(a);0<a.length;)c.push(ra.apply(null,la(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(b,";base64,").concat(btoa(c.join("")))}(a,"image/jpeg"),a=function(a){var b=0,c=1,d=1;switch(a){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90;d=-1;break;case 6:b=90;break;case 7:b=90;c=-1;break;case 8:b=-90}return{rotate:b,scaleX:c,scaleY:d}}(d),
e=a.rotate,m=a.scaleX,k=a.scaleY);b.rotatable&&(c.rotate=e);b.scalable&&(c.scaleX=m,c.scaleY=k);this.clone()}},{key:"clone",value:function(){var a,b,c=this.element,h=this.url;this.options.checkCrossOrigin&&pa(h)&&(b=(a=c.crossOrigin)?h:(a="anonymous",qa(h)));this.crossOrigin=a;this.crossOriginUrl=b;var e=document.createElement("img");a&&(e.crossOrigin=a);e.src=b||h;(this.image=e).onload=this.start.bind(this);e.onerror=this.stop.bind(this);t(e,ta);c.parentNode.insertBefore(e,c.nextSibling)}},{key:"start",
value:function(){var a=this,b=this.isImg?this.element:this.image;b.onload=null;b.onerror=null;this.sizing=!0;var c=F.navigator&&/^(?:.(?!chrome|android))*safari/i.test(F.navigator.userAgent),h=function(b,c){u(a.imageData,{naturalWidth:b,naturalHeight:c,aspectRatio:b/c});a.sizing=!1;a.sized=!0;a.build()};if(!b.naturalWidth||c){var e=document.createElement("img"),m=document.body||document.documentElement;(this.sizingImage=e).onload=function(){h(e.width,e.height);c||m.removeChild(e)};e.src=b.src;c||
(e.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",m.appendChild(e))}else h(b.naturalWidth,b.naturalHeight)}},{key:"stop",value:function(){var a=this.image;a.onload=null;a.onerror=null;a.parentNode.removeChild(a);this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var a=this.element,b=this.options,c=this.image,h=a.parentNode,e=document.createElement("div");e.innerHTML=
'\x3cdiv class\x3d"cropper-container" touch-action\x3d"none"\x3e\x3cdiv class\x3d"cropper-wrap-box"\x3e\x3cdiv class\x3d"cropper-canvas"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"cropper-drag-box"\x3e\x3c/div\x3e\x3cdiv class\x3d"cropper-crop-box"\x3e\x3cspan class\x3d"cropper-view-box"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-dashed dashed-h"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-dashed dashed-v"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-center"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-face"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-line line-e" data-cropper-action\x3d"e"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-line line-n" data-cropper-action\x3d"n"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-line line-w" data-cropper-action\x3d"w"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-line line-s" data-cropper-action\x3d"s"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-e" data-cropper-action\x3d"e"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-n" data-cropper-action\x3d"n"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-w" data-cropper-action\x3d"w"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-s" data-cropper-action\x3d"s"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-ne" data-cropper-action\x3d"ne"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-nw" data-cropper-action\x3d"nw"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-sw" data-cropper-action\x3d"sw"\x3e\x3c/span\x3e\x3cspan class\x3d"cropper-point point-se" data-cropper-action\x3d"se"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e';
var e=e.querySelector(".".concat("cropper","-container")),m=e.querySelector(".".concat("cropper","-canvas")),k=e.querySelector(".".concat("cropper","-drag-box")),l=e.querySelector(".".concat("cropper","-crop-box")),q=l.querySelector(".".concat("cropper","-face"));this.container=h;this.cropper=e;this.canvas=m;this.dragBox=k;this.cropBox=l;this.viewBox=e.querySelector(".".concat("cropper","-view-box"));this.face=q;m.appendChild(c);t(a,A);h.insertBefore(e,a.nextSibling);this.isImg||E(c,ta);this.initPreview();
this.bind();b.initialAspectRatio=Math.max(0,b.initialAspectRatio)||NaN;b.aspectRatio=Math.max(0,b.aspectRatio)||NaN;b.viewMode=Math.max(0,Math.min(3,Math.round(b.viewMode)))||0;t(l,A);b.guides||t(l.getElementsByClassName("".concat("cropper","-dashed")),A);b.center||t(l.getElementsByClassName("".concat("cropper","-center")),A);b.background&&t(e,"".concat("cropper","-bg"));b.highlight||t(q,Ga);b.cropBoxMovable&&(t(q,ja),R(q,V,"all"));b.cropBoxResizable||(t(l.getElementsByClassName("".concat("cropper",
"-line")),A),t(l.getElementsByClassName("".concat("cropper","-point")),A));this.render();this.ready=!0;this.setDragMode(b.dragMode);b.autoCrop&&this.crop();this.setData(b.data);x(b.ready)&&y(a,"ready",b.ready,{once:!0});Q(a,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),E(this.element,A))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?
(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],O(a.prototype,c),b&&O(a,b),a}();return u(M.prototype,{render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.element,c=this.options,b=this.container,d=this.cropper;t(d,A);E(a,A);c={width:Math.max(b.offsetWidth,Number(c.minContainerWidth)||200),height:Math.max(b.offsetHeight,
Number(c.minContainerHeight)||100)};I(d,{width:(this.containerData=c).width,height:c.height});t(a,A);E(d,A)},initCanvas:function(){var a=this.containerData,c=this.imageData,b=this.options.viewMode,d=90==Math.abs(c.rotate)%180,f=d?c.naturalHeight:c.naturalWidth,g=d?c.naturalWidth:c.naturalHeight,h=f/g,d=a.width,e=a.height;a.height*h>a.width?3===b?d=a.height*h:e=a.width/h:3===b?e=a.width/h:d=a.height*h;f={aspectRatio:h,naturalWidth:f,naturalHeight:g,width:d,height:e};f.left=(a.width-d)/2;f.top=(a.height-
e)/2;f.oldLeft=f.left;f.oldTop=f.top;this.canvasData=f;this.limited=1===b||2===b;this.limitCanvas(!0,!0);this.initialImageData=u({},c);this.initialCanvasData=u({},f)},limitCanvas:function(a,c){var b=this.options,d=this.containerData,f=this.canvasData,g=this.cropBoxData,h=b.viewMode,e=f.aspectRatio,m=this.cropped&&g;a&&(a=Number(b.minCanvasWidth)||0,b=Number(b.minCanvasHeight)||0,1<h?(a=Math.max(a,d.width),b=Math.max(b,d.height),3===h&&(a<b*e?a=b*e:b=a/e)):0<h&&(a?a=Math.max(a,m?g.width:0):b?b=Math.max(b,
m?g.height:0):m&&((a=g.width)<(b=g.height)*e?a=b*e:b=a/e)),e=Y({aspectRatio:e,width:a,height:b}),a=e.width,b=e.height,f.minWidth=a,f.minHeight=b,f.maxWidth=1/0,f.maxHeight=1/0);c&&((m?0:1)<h?(c=d.width-f.width,e=d.height-f.height,f.minLeft=Math.min(0,c),f.minTop=Math.min(0,e),f.maxLeft=Math.max(0,c),f.maxTop=Math.max(0,e),m&&this.limited&&(f.minLeft=Math.min(g.left,g.left+(g.width-f.width)),f.minTop=Math.min(g.top,g.top+(g.height-f.height)),f.maxLeft=g.left,f.maxTop=g.top,2===h&&(f.width>=d.width&&
(f.minLeft=Math.min(0,c),f.maxLeft=Math.max(0,c)),f.height>=d.height&&(f.minTop=Math.min(0,e),f.maxTop=Math.max(0,e))))):(f.minLeft=-f.width,f.minTop=-f.height,f.maxLeft=d.width,f.maxTop=d.height))},renderCanvas:function(a,c){var b=this.canvasData,d=this.imageData;if(c){var f;c=d.naturalWidth*Math.abs(d.scaleX||1);f=d.naturalHeight*Math.abs(d.scaleY||1);d=d.rotate||0;if(90==(d=Math.abs(d)%180))f={width:f,height:c};else{var g=d%90*Math.PI/180,h=Math.sin(g),e=Math.cos(g),g=c*e+f*h;c=c*h+f*e;f=90<d?
{width:c,height:g}:{width:g,height:c}}c=f.width;f=f.height;d=c/b.naturalWidth*b.width;h=f/b.naturalHeight*b.height;b.left-=(d-b.width)/2;b.top-=(h-b.height)/2;b.width=d;b.height=h;b.aspectRatio=c/f;b.naturalWidth=c;b.naturalHeight=f;this.limitCanvas(!0,!1)}(b.width>b.maxWidth||b.width<b.minWidth)&&(b.left=b.oldLeft);(b.height>b.maxHeight||b.height<b.minHeight)&&(b.top=b.oldTop);b.width=Math.min(Math.max(b.width,b.minWidth),b.maxWidth);b.height=Math.min(Math.max(b.height,b.minHeight),b.maxHeight);
this.limitCanvas(!1,!0);b.left=Math.min(Math.max(b.left,b.minLeft),b.maxLeft);b.top=Math.min(Math.max(b.top,b.minTop),b.maxTop);b.oldLeft=b.left;b.oldTop=b.top;I(this.canvas,u({width:b.width,height:b.height},S({translateX:b.left,translateY:b.top})));this.renderImage(a);this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(a){var c=this.canvasData,b=this.imageData,d=c.width/c.naturalWidth*b.naturalWidth,f=c.height/c.naturalHeight*b.naturalHeight;u(b,{width:d,height:f,left:(c.width-
d)/2,top:(c.height-f)/2});I(this.image,u({width:b.width,height:b.height},S(u({translateX:b.left,translateY:b.top},b))));a&&this.output()},initCropBox:function(){var a=this.options,c=this.canvasData,b=a.aspectRatio||a.initialAspectRatio,a=Number(a.autoCropArea)||.8,d={width:c.width,height:c.height};b&&(c.height*b>c.width?d.height=d.width/b:d.width=d.height*b);this.cropBoxData=d;this.limitCropBox(!0,!0);d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth);d.height=Math.min(Math.max(d.height,d.minHeight),
d.maxHeight);d.width=Math.max(d.minWidth,d.width*a);d.height=Math.max(d.minHeight,d.height*a);d.left=c.left+(c.width-d.width)/2;d.top=c.top+(c.height-d.height)/2;d.oldLeft=d.left;d.oldTop=d.top;this.initialCropBoxData=u({},d)},limitCropBox:function(a,c){var b=this.options,d=this.containerData,f=this.canvasData,g=this.cropBoxData,h=this.limited,e=b.aspectRatio;if(a){a=Number(b.minCropBoxWidth)||0;var b=Number(b.minCropBoxHeight)||0,m=h?Math.min(d.width,f.width,f.width+f.left,d.width-f.left):d.width,
k=h?Math.min(d.height,f.height,f.height+f.top,d.height-f.top):d.height;a=Math.min(a,d.width);b=Math.min(b,d.height);e&&(a&&b?a<b*e?b=a/e:a=b*e:a?b=a/e:b&&(a=b*e),m<k*e?k=m/e:m=k*e);g.minWidth=Math.min(a,m);g.minHeight=Math.min(b,k);g.maxWidth=m;g.maxHeight=k}c&&(g.maxTop=h?(g.minLeft=Math.max(0,f.left),g.minTop=Math.max(0,f.top),g.maxLeft=Math.min(d.width,f.left+f.width)-g.width,Math.min(d.height,f.top+f.height)-g.height):(g.minLeft=0,g.minTop=0,g.maxLeft=d.width-g.width,d.height-g.height))},renderCropBox:function(){var a=
this.options,c=this.containerData,b=this.cropBoxData;(b.width>b.maxWidth||b.width<b.minWidth)&&(b.left=b.oldLeft);(b.height>b.maxHeight||b.height<b.minHeight)&&(b.top=b.oldTop);b.width=Math.min(Math.max(b.width,b.minWidth),b.maxWidth);b.height=Math.min(Math.max(b.height,b.minHeight),b.maxHeight);this.limitCropBox(!1,!0);b.left=Math.min(Math.max(b.left,b.minLeft),b.maxLeft);b.top=Math.min(Math.max(b.top,b.minTop),b.maxTop);b.oldLeft=b.left;b.oldTop=b.top;a.movable&&a.cropBoxMovable&&R(this.face,V,
b.width>=c.width&&b.height>=c.height?"move":"all");I(this.cropBox,u({width:b.width,height:b.height},S({translateX:b.left,translateY:b.top})));this.cropped&&this.limited&&this.limitCanvas(!0,!0);this.disabled||this.output()},output:function(){this.preview();Q(this.element,"crop",this.getData())}},{initPreview:function(){var a=this.crossOrigin,c=this.options.preview,b=a?this.crossOriginUrl:this.url,d=document.createElement("img");if(a&&(d.crossOrigin=a),d.src=b,this.viewBox.appendChild(d),this.viewBoxImage=
d,c)d=c,"string"==typeof c?d=this.element.ownerDocument.querySelectorAll(c):c.querySelector&&(d=[c]),v(this.previews=d,function(c){var d=document.createElement("img");R(c,G,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML});a&&(d.crossOrigin=a);d.src=b;d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';c.innerHTML="";c.appendChild(d)})},resetPreview:function(){v(this.previews,
function(a){var c=ga(a,G);I(a,{width:c.width,height:c.height});a.innerHTML=c.html;if(L(a[G]))try{delete a[G]}catch(b){a[G]=void 0}else if(a.dataset)try{delete a.dataset[G]}catch(b){a.dataset[G]=void 0}else a.removeAttribute("data-".concat(fa(G)))})},preview:function(){var a=this.imageData,c=this.canvasData,b=this.cropBoxData,d=b.width,f=b.height,g=a.width,h=a.height,e=b.left-c.left-a.left,m=b.top-c.top-a.top;this.cropped&&!this.disabled&&(I(this.viewBoxImage,u({width:g,height:h},S(u({translateX:-e,
translateY:-m},a)))),v(this.previews,function(b){var c=ga(b,G),k=c.width,c=c.height,n=k,C=c,w=1;d&&(C=f*(w=k/d));f&&c<C&&(n=d*(w=c/f),C=c);I(b,{width:n,height:C});I(b.getElementsByTagName("img")[0],u({width:g*w,height:h*w},S(u({translateX:-e*w,translateY:-m*w},a))))}))}},{bind:function(){var a=this.element,c=this.options,b=this.cropper;x(c.cropstart)&&y(a,"cropstart",c.cropstart);x(c.cropmove)&&y(a,"cropmove",c.cropmove);x(c.cropend)&&y(a,"cropend",c.cropend);x(c.crop)&&y(a,"crop",c.crop);x(c.zoom)&&
y(a,"zoom",c.zoom);y(b,ua,this.onCropStart=this.cropStart.bind(this));c.zoomable&&c.zoomOnWheel&&y(b,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0});c.toggleDragModeOnDblclick&&y(b,"dblclick",this.onDblclick=this.dblclick.bind(this));y(a.ownerDocument,va,this.onCropMove=this.cropMove.bind(this));y(a.ownerDocument,wa,this.onCropEnd=this.cropEnd.bind(this));c.responsive&&y(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var a=this.element,c=this.options,
b=this.cropper;x(c.cropstart)&&D(a,"cropstart",c.cropstart);x(c.cropmove)&&D(a,"cropmove",c.cropmove);x(c.cropend)&&D(a,"cropend",c.cropend);x(c.crop)&&D(a,"crop",c.crop);x(c.zoom)&&D(a,"zoom",c.zoom);D(b,ua,this.onCropStart);c.zoomable&&c.zoomOnWheel&&D(b,"wheel",this.onWheel,{passive:!1,capture:!0});c.toggleDragModeOnDblclick&&D(b,"dblclick",this.onDblclick);D(a.ownerDocument,va,this.onCropMove);D(a.ownerDocument,wa,this.onCropEnd);c.responsive&&D(window,"resize",this.onResize)}},{resize:function(){var a=
this.options,c=this.container,b=this.containerData,d=Number(a.minContainerWidth)||200,f=Number(a.minContainerHeight)||100;if(!(this.disabled||b.width<=d||b.height<=f)){var g,h,e=c.offsetWidth/b.width;if(1!==e||c.offsetHeight!==b.height)a.restore&&(g=this.getCanvasData(),h=this.getCropBoxData()),this.render(),a.restore&&(this.setCanvasData(v(g,function(a,b){g[b]=a*e})),this.setCropBoxData(v(h,function(a,b){h[b]=a*e})))}},dblclick:function(){var a;this.disabled||"none"===this.options.dragMode||this.setDragMode((a=
this.dragBox,(a.classList?a.classList.contains(T):-1<a.className.indexOf(T))?"move":"crop"))},wheel:function(a){var c=this,b=Number(this.options.wheelZoomRatio)||.1,d=1;this.disabled||(a.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){c.wheeling=!1},50),a.deltaY?d=0<a.deltaY?1:-1:a.wheelDelta?d=-a.wheelDelta/120:a.detail&&(d=0<a.detail?1:-1),this.zoom(-d*b,a)))},cropStart:function(a){var c=a.buttons,b=a.button;if(!(this.disabled||n(c)&&1!==c||n(b)&&0!==b||a.ctrlKey)){var c=
this.options,d=this.pointers;a.changedTouches?v(a.changedTouches,function(a){d[a.identifier]=X(a)}):d[a.pointerId||0]=X(a);c=1<Object.keys(d).length&&c.zoomable&&c.zoomOnTouch?"zoom":ga(a.target,V);Ha.test(c)&&!1!==Q(this.element,"cropstart",{originalEvent:a,action:c})&&(a.preventDefault(),this.action=c,this.cropping=!1,"crop"===c&&(this.cropping=!0,t(this.dragBox,U)))}},cropMove:function(a){var c=this.action;if(!this.disabled&&c){var b=this.pointers;a.preventDefault();!1!==Q(this.element,"cropmove",
{originalEvent:a,action:c})&&(a.changedTouches?v(a.changedTouches,function(a){u(b[a.identifier]||{},X(a,!0))}):u(b[a.pointerId||0]||{},X(a,!0)),this.change(a))}},cropEnd:function(a){if(!this.disabled){var c=this.action,b=this.pointers;a.changedTouches?v(a.changedTouches,function(a){delete b[a.identifier]}):delete b[a.pointerId||0];c&&(a.preventDefault(),Object.keys(b).length||(this.action=""),this.cropping&&(this.cropping=!1,P(this.dragBox,U,this.cropped&&this.options.modal)),Q(this.element,"cropend",
{originalEvent:a,action:c}))}}},{change:function(a){var c=this.canvasData,b=this.containerData,d=this.cropBoxData,f=this.pointers,g=this.action,h=this.options.aspectRatio,e=d.left,m=d.top,k=d.width,l=d.height,q=e+k,n=m+l,C=0,w=0,t=b.width,J=b.height,z=!0;!h&&a.shiftKey&&(h=k&&l?k/l:1);this.limited&&(C=d.minLeft,w=d.minTop,t=C+Math.min(b.width,c.width,c.left+c.width),J=w+Math.min(b.height,c.height,c.top+c.height));var x,y,c=f[Object.keys(f)[0]],r=c.endX-c.startX,p=c.endY-c.startY,b=function(a){switch(a){case "e":q+
r>t&&(r=t-q);break;case "w":e+r<C&&(r=C-e);break;case "n":m+p<w&&(p=w-m);break;case "s":n+p>J&&(p=J-n)}};switch(g){case "all":e+=r;m+=p;break;case "e":if(0<=r&&(t<=q||h&&(m<=w||J<=n))){z=!1;break}b("e");0>(k+=r)&&(g="w",e-=k=-k);h&&(l=k/h,m+=(d.height-l)/2);break;case "n":if(0>=p&&(m<=w||h&&(e<=C||t<=q))){z=!1;break}b("n");l-=p;m+=p;0>l&&(g="s",m-=l=-l);h&&(k=l*h,e+=(d.width-k)/2);break;case "w":if(0>=r&&(e<=C||h&&(m<=w||J<=n))){z=!1;break}b("w");k-=r;e+=r;0>k&&(g="e",e-=k=-k);h&&(l=k/h,m+=(d.height-
l)/2);break;case "s":if(0<=p&&(J<=n||h&&(e<=C||t<=q))){z=!1;break}b("s");0>(l+=p)&&(g="n",m-=l=-l);h&&(k=l*h,e+=(d.width-k)/2);break;case "ne":if(h){if(0>=p&&(m<=w||t<=q)){z=!1;break}b("n");l-=p;m+=p;k=l*h}else b("n"),b("e"),0<=r?q<t?k+=r:0>=p&&m<=w&&(z=!1):k+=r,0>=p?w<m&&(l-=p,m+=p):(l-=p,m+=p);0>k&&0>l?(g="sw",m-=l=-l,e-=k=-k):0>k?(g="nw",e-=k=-k):0>l&&(g="se",m-=l=-l);break;case "nw":if(h){if(0>=p&&(m<=w||e<=C)){z=!1;break}b("n");l-=p;m+=p;k=l*h;e+=d.width-k}else b("n"),b("w"),0>=r?C<e?(k-=r,e+=
r):0>=p&&m<=w&&(z=!1):(k-=r,e+=r),0>=p?w<m&&(l-=p,m+=p):(l-=p,m+=p);0>k&&0>l?(g="se",m-=l=-l,e-=k=-k):0>k?(g="ne",e-=k=-k):0>l&&(g="sw",m-=l=-l);break;case "sw":if(h){if(0>=r&&(e<=C||J<=n)){z=!1;break}b("w");k-=r;e+=r;l=k/h}else b("s"),b("w"),0>=r?C<e?(k-=r,e+=r):0<=p&&J<=n&&(z=!1):(k-=r,e+=r),0<=p?n<J&&(l+=p):l+=p;0>k&&0>l?(g="ne",m-=l=-l,e-=k=-k):0>k?(g="se",e-=k=-k):0>l&&(g="nw",m-=l=-l);break;case "se":if(h){if(0<=r&&(t<=q||J<=n)){z=!1;break}b("e");l=(k+=r)/h}else b("s"),b("e"),0<=r?q<t?k+=r:
0<=p&&J<=n&&(z=!1):k+=r,0<=p?n<J&&(l+=p):l+=p;0>k&&0>l?(g="nw",m-=l=-l,e-=k=-k):0>k?(g="sw",e-=k=-k):0>l&&(g="ne",m-=l=-l);break;case "move":this.move(r,p);z=!1;break;case "zoom":this.zoom((x=u({},f),y=[],v(f,function(a,b){delete x[b];v(x,function(b){var c=Math.abs(a.startX-b.startX),d=Math.abs(a.startY-b.startY),e=Math.abs(a.endX-b.endX);b=Math.abs(a.endY-b.endY);c=Math.sqrt(c*c+d*d);y.push((Math.sqrt(e*e+b*b)-c)/c)})}),y.sort(function(a,b){return Math.abs(a)<Math.abs(b)}),y[0]),a);z=!1;break;case "crop":r&&
p?(a=oa(this.cropper),e=c.startX-a.left,m=c.startY-a.top,k=d.minWidth,l=d.minHeight,0<r?g=0<p?"se":"ne":0>r&&(e-=k,g=0<p?"sw":"nw"),0>p&&(m-=l),this.cropped||(E(this.cropBox,A),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):z=!1}z&&(d.width=k,d.height=l,d.left=e,d.top=m,this.action=g,this.renderCropBox());v(f,function(a){a.startX=a.endX;a.startY=a.endY})}},{crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&t(this.dragBox,
U),E(this.cropBox,A),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=u({},this.initialImageData),this.canvasData=u({},this.initialCanvasData),this.cropBoxData=u({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(u(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),
E(this.dragBox,U),t(this.cropBox,A)),this},replace:function(a){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&a&&(this.isImg&&(this.element.src=a),c?(this.url=a,this.image.src=a,this.ready&&(this.viewBoxImage.src=a,v(this.previews,function(b){b.getElementsByTagName("img")[0].src=a}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(a))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,E(this.cropper,sa)),
this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,t(this.cropper,sa)),this},destroy:function(){var a=this.element;return a.cropper&&(a.cropper=void 0,this.isImg&&this.replaced&&(a.src=this.originalUrl),this.uncreate()),this},move:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,b=this.canvasData,d=b.left,b=b.top;return this.moveTo(void 0===a?a:d+Number(a),void 0===c?c:b+Number(c))},moveTo:function(a){var c=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:a,b=this.canvasData,d=!1;return a=Number(a),c=Number(c),this.ready&&!this.disabled&&this.options.movable&&(n(a)&&(b.left=a,d=!0),n(c)&&(b.top=c,d=!0),d&&this.renderCanvas(!0)),this},zoom:function(a,c){var b=this.canvasData;return a=0>(a=Number(a))?1/(1-a):1+a,this.zoomTo(b.width*a/b.naturalWidth,null,c)},zoomTo:function(a,c,b){var d,f,g,h=this.options,e=this.canvasData,m=e.width,k=e.height,l=e.naturalWidth,q=e.naturalHeight;if(0<=(a=Number(a))&&this.ready&&!this.disabled&&h.zoomable){h=
l*a;q*=a;if(!1===Q(this.element,"zoom",{ratio:a,oldRatio:m/l,originalEvent:b}))return this;b?(c=this.pointers,a=oa(this.cropper),b=c&&Object.keys(c).length?(g=f=d=0,v(c,function(a){var b=a.startY;d+=a.startX;f+=b;g+=1}),{pageX:d/=g,pageY:f/=g}):{pageX:b.pageX,pageY:b.pageY},e.left-=(b.pageX-a.left-e.left)/m*(h-m),e.top-=(b.pageY-a.top-e.top)/k*(q-k)):H(c)&&n(c.x)&&n(c.y)?(e.left-=(c.x-e.left)/m*(h-m),e.top-=(c.y-e.top)/k*(q-k)):(e.left-=(h-m)/2,e.top-=(q-k)/2);e.width=h;e.height=q;this.renderCanvas(!0)}return this},
rotate:function(a){return this.rotateTo((this.imageData.rotate||0)+Number(a))},rotateTo:function(a){return n(a=Number(a))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=a%360,this.renderCanvas(!0,!0)),this},scaleX:function(a){var c=this.imageData.scaleY;return this.scale(a,n(c)?c:1)},scaleY:function(a){var c=this.imageData.scaleX;return this.scale(n(c)?c:1,a)},scale:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,b=this.imageData,d=!1;return a=
Number(a),c=Number(c),this.ready&&!this.disabled&&this.options.scalable&&(n(a)&&(b.scaleX=a,d=!0),n(c)&&(b.scaleY=c,d=!0),d&&this.renderCanvas(!0,!0)),this},getData:function(){var a,c=0<arguments.length&&void 0!==arguments[0]&&arguments[0],b=this.options,d=this.imageData,f=this.canvasData,g=this.cropBoxData;if(this.ready&&this.cropped){a={x:g.left-f.left,y:g.top-f.top,width:g.width,height:g.height};var h=d.width/d.naturalWidth;if(v(a,function(b,c){a[c]=b/h}),c)c=Math.round(a.y+a.height),f=Math.round(a.x+
a.width),a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=f-a.x,a.height=c-a.y}else a={x:0,y:0,width:0,height:0};return b.rotatable&&(a.rotate=d.rotate||0),b.scalable&&(a.scaleX=d.scaleX||1,a.scaleY=d.scaleY||1),a},setData:function(a){var c=this.options,b=this.imageData,d=this.canvasData,f={};if(this.ready&&!this.disabled&&H(a)){var g=!1;c.rotatable&&n(a.rotate)&&a.rotate!==b.rotate&&(b.rotate=a.rotate,g=!0);c.scalable&&(n(a.scaleX)&&a.scaleX!==b.scaleX&&(b.scaleX=a.scaleX,g=!0),n(a.scaleY)&&a.scaleY!==
b.scaleY&&(b.scaleY=a.scaleY,g=!0));g&&this.renderCanvas(!0,!0);c=b.width/b.naturalWidth;n(a.x)&&(f.left=a.x*c+d.left);n(a.y)&&(f.top=a.y*c+d.top);n(a.width)&&(f.width=a.width*c);n(a.height)&&(f.height=a.height*c);this.setCropBoxData(f)}return this},getContainerData:function(){return this.ready?u({},this.containerData):{}},getImageData:function(){return this.sized?u({},this.imageData):{}},getCanvasData:function(){var a=this.canvasData,c={};return this.ready&&v("left top width height naturalWidth naturalHeight".split(" "),
function(b){c[b]=a[b]}),c},setCanvasData:function(a){var c=this.canvasData,b=c.aspectRatio;return this.ready&&!this.disabled&&H(a)&&(n(a.left)&&(c.left=a.left),n(a.top)&&(c.top=a.top),n(a.width)?(c.width=a.width,c.height=a.width/b):n(a.height)&&(c.height=a.height,c.width=a.height*b),this.renderCanvas(!0)),this},getCropBoxData:function(){var a,c=this.cropBoxData;return this.ready&&this.cropped&&(a={left:c.left,top:c.top,width:c.width,height:c.height}),a||{}},setCropBoxData:function(a){var c,b,d=this.cropBoxData,
f=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&H(a)&&(n(a.left)&&(d.left=a.left),n(a.top)&&(d.top=a.top),n(a.width)&&a.width!==d.width&&(c=!0,d.width=a.width),n(a.height)&&a.height!==d.height&&(b=!0,d.height=a.height),f&&(c?d.height=d.width/f:b&&(d.width=d.height*f)),this.renderCropBox()),this},getCroppedCanvas:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var c,b,d,f,g,h,e,m,k,l,n,t,u,
w,v,x,z,y,A,r,p,D,E,F,G,I,L,O,H,K,P,Q,M,N,R,S,V,X,aa,B=this.canvasData,ba=(c=this.image,b=this.imageData,d=b.aspectRatio,f=b.naturalWidth,g=b.naturalHeight,h=b.rotate,e=void 0===h?0:h,m=b.scaleX,k=void 0===m?1:m,l=b.scaleY,n=void 0===l?1:l,t=B.aspectRatio,u=B.naturalWidth,w=B.naturalHeight,v=a.fillColor,x=void 0===v?"transparent":v,z=a.imageSmoothingEnabled,y=void 0===z||z,A=a.imageSmoothingQuality,r=void 0===A?"low":A,p=a.maxWidth,D=void 0===p?1/0:p,E=a.maxHeight,F=void 0===E?1/0:E,G=a.minWidth,
I=void 0===G?0:G,L=a.minHeight,O=void 0===L?0:L,H=document.createElement("canvas"),K=H.getContext("2d"),P=Y({aspectRatio:t,width:D,height:F}),Q=Y({aspectRatio:t,width:I,height:O},"cover"),M=Math.min(P.width,Math.max(Q.width,u)),N=Math.min(P.height,Math.max(Q.height,w)),R=Y({aspectRatio:d,width:D,height:F}),S=Y({aspectRatio:d,width:I,height:O},"cover"),V=Math.min(R.width,Math.max(S.width,f)),X=Math.min(R.height,Math.max(S.height,g)),aa=[-V/2,-X/2,V,X],H.width=ca(M),H.height=ca(N),K.fillStyle=x,K.fillRect(0,
0,M,N),K.save(),K.translate(M/2,N/2),K.rotate(e*Math.PI/180),K.scale(k,n),K.imageSmoothingEnabled=y,K.imageSmoothingQuality=r,K.drawImage.apply(K,[c].concat(ka(aa.map(function(a){return Math.floor(ca(a))})))),K.restore(),H);if(!this.cropped)return ba;d=this.getData();f=d.x;b=d.y;c=d.width;d=d.height;B=ba.width/Math.floor(B.naturalWidth);1!==B&&(f*=B,b*=B,c*=B,d*=B);e=c/d;g=Y({aspectRatio:e,width:a.maxWidth||1/0,height:a.maxHeight||1/0});h=Y({aspectRatio:e,width:a.minWidth||0,height:a.minHeight||0},
"cover");e=Y({aspectRatio:e,width:a.width||(1!==B?ba.width:c),height:a.height||(1!==B?ba.height:d)});B=e.width;e=e.height;B=Math.min(g.width,Math.max(h.width,B));e=Math.min(g.height,Math.max(h.height,e));g=document.createElement("canvas");h=g.getContext("2d");g.width=ca(B);g.height=ca(e);h.fillStyle=a.fillColor||"transparent";h.fillRect(0,0,B,e);e=a.imageSmoothingEnabled;a=a.imageSmoothingQuality;h.imageSmoothingEnabled=void 0===e||e;a&&(h.imageSmoothingQuality=a);var Z,W,T,U,da,ea,a=ba.width;e=ba.height;
f<=-c||a<f?da=T=Z=f=0:0>=f?(T=-f,f=0,da=Z=Math.min(a,c+f)):f<=a&&(T=0,da=Z=Math.min(c,a-f));0>=Z||b<=-d||e<b?ea=U=W=b=0:0>=b?(U=-b,b=0,ea=W=Math.min(e,d+b)):b<=e&&(U=0,ea=W=Math.min(d,e-b));Z=[f,b,Z,W];0<da&&0<ea&&(W=B/c,Z.push(T*W,U*W,da*W,ea*W));return h.drawImage.apply(h,[ba].concat(ka(Z.map(function(a){return Math.floor(ca(a))})))),g},setAspectRatio:function(a){var c=this.options;return this.disabled||void 0===a||(c.aspectRatio=Math.max(0,a)||NaN,this.ready&&(this.initCropBox(),this.cropped&&
this.renderCropBox())),this},setDragMode:function(a){var c=this.options,b=this.dragBox,d=this.face;if(this.ready&&!this.disabled){var f="crop"===a,g=c.movable&&"move"===a;a=f||g?a:"none";c.dragMode=a;R(b,V,a);P(b,T,f);P(b,ja,g);c.cropBoxMovable||(R(d,V,a),P(d,T,f),P(d,ja,g))}return this}}),M});